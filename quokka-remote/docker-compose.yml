version: '3.1'

services:

  mongo:
    image: mongo
    restart: always
    ports:
      - 27017:27017
    environment:
      MONGO_INITDB_ROOT_USERNAME: quokka
      MONGO_INITDB_ROOT_PASSWORD: quokka

  # be:
  #   image: flask
  #   build:
  #     context: backend
  #     dockerfile: ./flask/Dockerfile
  #   env_file:
  #   - path: ./.env
  #   ports:
  #     - 5000:5000
  #   deploy:
  #   restart_policy:
  #     condition: on-failure
  #     delay: 5s
  #     max_attempts: 3
  #     window: 120s
  #   resources:
  #     limits:
  #       cpus: '0.50'
  #       memory: 252M
  #     reservations:
  #       cpus: '0.25'
  #       memory: 252M
  #   environment:
  #     PRIMARY_DATABASE_HOST: mongo
  #     PRIMARY_DATABASE_PORT: 27017
  #     PRIMARY_DATABASE_USERNAME: quokka
  #     MONGO_INITDB_ROOT_PASSWORD: quokka
  #     PRIMARY_DATABASE_DATABASE: quokka
  # fe:
  #   image: next
  #   build: ./webapp